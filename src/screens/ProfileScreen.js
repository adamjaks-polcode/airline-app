import {Dimensions, StyleSheet, View} from 'react-native';import Input from '../components/Input';import {useTranslation} from 'react-i18next';import {useEffect, useLayoutEffect, useState} from 'react';import Dropdown from '../components/Dropdown';import {useGetUserSettingsQuery, useUpdateUserSettingsMutation} from '../../services/userSettingsService';import Button from '../components/Button';import {KeyboardAwareScrollView} from 'react-native-keyboard-aware-scroll-view';const useStyles = () => {  return StyleSheet.create({    wrapper: {      paddingHorizontal: '10%',      paddingVertical: 32,      gap: 16    },    inputSection: {      position: 'relative'    }  })};const DEFAULT_DOCUMENT_TYPE_OPTIONS = [  {    value: 'id',    title: 'ID',  },  {    value: 'passport',    title: 'Passport',  }];const ProfileScreen = ({navigation}) => {  const [showDocumentTypeMenu, setShowDocumentTypeMenu] = useState(false);  const [defaultDocumentType, setDefaultDocumentType] = useState('');  const [userSettings, setUserSettings] = useState({    firstName: '',    lastName: '',    email: '',    country: '',    defaultDocumentType: '',    idNumber: ''  });  const {data: userSettingsData, isLoading, refetch: refetchUserSettingsData} = useGetUserSettingsQuery();  const [update, {error}] = useUpdateUserSettingsMutation();  const {t} = useTranslation();  const styles = useStyles();  // todo: userSettings: email i username - ujednolicic  // todo: blokowanie opcji profileSettings jesli nie zalogowany user (i inne)  useEffect(() => {    setDefaultDocumentType(userSettingsData?.defaultDocumentType);    setUserSettings(userSettingsData);  }, [userSettingsData]);  const onChangeInputValue = (value, type) => {    setUserSettings(currentUserSettings => ({...currentUserSettings, [type]: value}));  };  const onSave = async () => {    await update({...userSettings, defaultDocumentType});    await refetchUserSettingsData();    navigation.goBack();  };  return (    <KeyboardAwareScrollView      extraHeight={Dimensions.get('window').height}    >      {        !isLoading && (          <View style={styles.wrapper}>            <Input              placeholder={t('profileScreen.firstName')}              label={t('profileScreen.firstName')}              value={userSettings?.firstName}              onChangeText={value => onChangeInputValue(value, 'firstName')}            />            <Input              placeholder={t('profileScreen.lastName')}              label={t('profileScreen.lastName')}              value={userSettings?.lastName}              onChangeText={value => onChangeInputValue(value, 'lastName')}            />            <Input              placeholder={t('profileScreen.email')}              label={t('profileScreen.email')}              value={userSettings?.email}              onChangeText={value => onChangeInputValue(value, 'email')}            />            <Input              placeholder={t('profileScreen.country')}              label={t('profileScreen.country')}              value={userSettings?.country}              onChangeText={value => onChangeInputValue(value, 'country')}            />            <Dropdown              visible={showDocumentTypeMenu}              label={defaultDocumentType}              onVisibleStateChange={setShowDocumentTypeMenu}              defaultLabel={t('profileScreen.defaultDocumentType')}              onOptionChange={value => setDefaultDocumentType(value)}              options={DEFAULT_DOCUMENT_TYPE_OPTIONS}            />            <Input              placeholder={t('profileScreen.idNumber')}              label={t('profileScreen.idNumber')}              value={userSettings?.idNumber}              onChangeText={value => onChangeInputValue(value, 'idNumber')}            />            <Button              text="Save"              onPress={onSave}            />          </View>        )      }    </KeyboardAwareScrollView>  )}export default ProfileScreen;